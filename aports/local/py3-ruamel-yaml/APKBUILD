# Contributor: Keith Maxwell <keith.maxwell@gmail.com>
# Maintainer: Keith Maxwell <keith.maxwell@gmail.com>
_pkgname=ruamel-yaml
pkgname="py3-${_pkgname}"
pkgver=0.15.37
_commit=731f9a604926
pkgrel=0
pkgdesc="ruamel.yaml is a YAML 1.2 loader/dumper package for Python"
url="https://bitbucket.org/ruamel/yaml"
arch="x86_64"
license="MIT"
depends="python3"
makedepends="python3-dev py3-setuptools"
checkdepends="py3-pytest"
source="$_pkgname-$pkgver.tar.gz::$url/get/$pkgver.tar.gz"

builddir="$srcdir/$_pkgname-$_commit"

build() {
	cd "$builddir"
	python3 setup.py build
}

package() {
	cd "$builddir"
	pip3 install . --root="$pkgdir" 
}

check() {
	cd "$builddir"
	PYTHONPATH="$builddir/build/lib.linux-x86_64-3.6" pytest-3 \
		--ignore=_test/test_api_change.py --ignore=_test/lib _test
}
sha512sums="f487a353f1873d96565abac2805c503e8e36a7fa0d7f0bf5933fab8ecf7a2581bac3fe177f0bc477e2c7902188a6a2822893d04362ac6a242b14cbe6a093b8c1  ruamel-yaml-0.15.37.tar.gz"
